# Демонстрационная программа аудио и видеодомофона Android
# Обязательные инструкции по чтению

# Вступление
#### Это программное обеспечение разработано в соответствии с основной идеей "Tao De Jing", которая реализует полнодуплексную аудио- и видеодомофон в реальном времени между двумя устройствами по протоколу TCP или UDP, и внесены следующие усовершенствования:
#### Поддержка акустического эхоподавления, благодаря моему собственному дизайну метода кадровой синхронизации аудиовхода и выхода, адаптивного метода задержки эха, тройного акустического эхоподавителя, акустическое эхо может быть устранено до более чем 99%, и эхо в том же пространство может быть устранено.И время сходимости очень короткое, независимо от того, насколько джиттер в сети, его можно устранить.
#### Поддерживает подавление шума и имеет эффекты подавления обычного шума дна, шумных уличных звуков, звуков ветра и т. Д.
#### Поддержка обнаружения голосовой активности, отправка сетевых данных только тогда, когда человек говорит, и никакие сетевые данные не генерируются, когда никто не говорит, тем самым уменьшая шум и уменьшая сетевой трафик.
#### Поддержка автоматической регулировки усиления, когда человек говорит тихим голосом, громкость автоматически увеличивается, а когда человек говорит громким голосом, громкость автоматически уменьшается.
#### Поддержка аудиокодека, степень сжатия аудиоданных составляет от 1 до 20% и поддерживает динамическую скорость передачи данных, что значительно снижает сетевой трафик, а также поддерживает маскировку потери пакетов данных, когда скорость потери сетевых пакетов столь же высока. как 30%, домофон еще можно выполнить.
#### Поддержка кодирования и декодирования видео, поддержка указанной скорости передачи данных, а видеодомофон по-прежнему может выполняться с минимальной скоростью 10 КБ / с.
#### Поддержка адаптивной буферизации джиттера аудио и видео Когда в сети есть джиттер, такой как потеря пакетов, беспорядок, задержка и т. Д., Глубину буфера можно адаптивно регулировать, чтобы справиться с этим дрожанием.
#### Сравнение эффекта шумоподавителя:
####! [изображение] (https://user-images.githubusercontent.com/16315192/115977799-d0722980-a5ad-11eb-811e-92da4d4f32f9.png)

# Подготовка
#### Подготовьте два устройства, на которых установлено Android 2.3 и выше (адаптировано для Android 10), одно из которых можно использовать в качестве клиента для подключения к другому в качестве сервера (вы можете использовать инструмент Ping для тестирования, рекомендуется Два устройства находятся в одной локальной сети), и на обоих устройствах установлена ​​одна и та же версия этого программного обеспечения.

# начинать
#### Нажмите «Создать сервер» непосредственно на одном устройстве, затем измените IP-адрес на IP-адрес серверного устройства на другом устройстве и нажмите «Подключить сервер», чтобы запустить интерком, щелкните на любом конце Интерком может быть прерван прерыванием.
#### Кнопка настройки обеспечивает настройку параметров для различных функций, которые в большинстве случаев не нужно изменять.Конечно, вы также можете изменить их самостоятельно в соответствии с вашими потребностями.
#### Особое внимание: если вы поместите два устройства в одну комнату для тестирования, могут возникнуть такие проблемы, как вой, неполный звук и т. Д. Это связано с тем, что микрофоны мобильных телефонов в настоящее время очень чувствительны, с небольшим звуком. быть записанным, что приводит к тому, что программное обеспечение не может правильно распознать эхо, поэтому рекомендуется протестировать его в другой комнате.

# Пересадка
#### Если вам нужно использовать аудио и видео функции этого программного обеспечения в вашем собственном программном обеспечении, вам нужно только скопировать пакет HeavenTao.XXXX и динамические библиотеки каждой платформы в папке jniLibs в свое собственное программное обеспечение, а затем наследуйте класс HeavenTao.Media.MediaProcThread, реализуйте UserInit, UserProcess, UserDestroy, UserReadAudioVideoInputFrame, UserWriteAudioOutputFrame, UserGetPcmAudioOutputFrame эти шесть функций, а затем добавьте android.permission.RECORD_AUDIO, android.permission.MODIFINGS. файл.
#### Если пользователи хотят обрабатывать аудио- и видеокадры на уровне JNI, они могут унаследовать эти шесть функций как собственные, а затем реализовать их на уровне JNI.
#### Если у пользователя есть функции, которые ему не нужны, ему нужно только удалить файл библиотеки, соответствующий функции.Вы также можете удалить соответствующий файл класса и изменить файл класса HeavenTao.Media.MediaProcThread.
#### Общие бесплатные функции включают в себя: версию подавителя акустического эха WebRtc с фиксированной точкой, подавление шума препроцессора Speex, подавитель шума версии с фиксированной точкой WebRtc, подавитель шума плавающей версии WebRtc, другие функции препроцессора Speex, декодер редактора Speex, локальный протокол TCP серверный сокет, локальный клиентский сокет протокола TCP, локальный сокет протокола UDP.
#### Расширенные функции зарядки включают: акустический эхоподавитель Speex, версию акустического эхоподавителя WebRtc с плавающей запятой, тройной акустический эхоподавитель SpeexWebRtc, шумоподавитель RNNoise, кодек OpenH264, адаптивный буфер джиттера собственной разработки.
#### Соответствующий акустический эхоподавитель Speex: libFunc.so, libSpeexDsp.so, SpeexAec.java.
#### Версия подавителя акустического эха WebRtc с фиксированной точкой соответствует: libFunc.so, libc ++ _ shared.so, libWebRtc.so, WebRtcAecm.java.
#### Версия подавителя акустического эха WebRtc с плавающей запятой соответствует: libFunc.so, libc ++ _ shared.so, libWebRtc.so, WebRtcAec.java.
#### SpeexWebRtc, соответствующий тройной компенсатор акустического эха: libFunc.so, libSpeexDsp.so, libc ++ _ shared.so, libWebRtc.so, SpeexWebRtcAec.java.
#### Версия подавителя шума WebRtc с фиксированной точкой соответствует: libFunc.so, libc ++ _ shared.so, libWebRtc.so, WebRtcNsx.java.
#### Версия подавителя шума WebRtc с плавающей запятой соответствует: libFunc.so, libc ++ _ shared.so, libWebRtc.so, WebRtcNs.java.
#### Соответствующий подавитель шума RN: libFunc.so, libc ++ _ shared.so, libWebRtc.so, libRNNoise.so, RNNoise.java.
#### Соответствующий препроцессор Speex: libFunc.so, libSpeexDsp.so, SpeexPproc.java.
#### Соответствующий кодек Speex: libFunc.so, libSpeex.so, SpeexEncoder.java, SpeexDecoder.java.
#### Соответствие читателя записи волнового файла: libFunc.so, libWaveFile.so, WaveFileReader.java, WaveFileWriter.java.
#### Соответствующий кодек OpenH264: libFunc.so, libOpenH264.so, OpenH264Encoder.java, OpenH264Decoder.java.
#### Соответствующая обработка изображений: libFunc.so, libLibYUV.so, LibYUV.java.
#### Соответствующий адаптивный буфер дрожания аудио и видео: libFunc.so, libc ++ _ shared.so, libAjb.so, AAjb.java, VAjb.java.
#### Локальный протокол TCP Соответствие сокетов протокола UDP: libFunc.so, libSokt.so, TcpSrvrSokt.java, TcpClntSokt.java, UdpSokt.java.

# Примечание
#### Не используйте 32-битные динамические библиотеки в 64-битных операционных системах и не используйте 64-битные динамические библиотеки в 32-битных операционных системах, иначе это вызовет непредвиденные проблемы.
#### Не скрывайте пакет HeavenTao.XXXX, иначе это вызовет непредвиденные проблемы.
#### При обновлении со старой версии до новой версии все файлы классов и файлы библиотеки должны быть обновлены. Вы не можете обновлять только файлы классов или файлы библиотеки, иначе это вызовет непредвиденные проблемы.
#### Если вы хотите использовать частоту дискретизации 8000 Гц, лучше не использовать подавление шума RNNoise, потому что оно очень сильно подавляет звук 8000 Гц.
#### Это программное обеспечение не поддерживает музыку, особенно шумоподавитель и шумоподавитель RNNoise, поставляемые с системой, могут очень сильно подавлять музыку.
#### Могут быть проблемы в аппаратной и программной среде некоторых устройств Android, которые могут привести к сбою подавления акустического эха.В этом случае эти проблемы должны быть решены в первую очередь.

# Другой
#### Это программное обеспечение использует версию Speex 1.2.0, версию SpeexDsp 1.2.0, версию WebRtc от июля 2019 года и версию OpenH264 от марта 2021 года в качестве основы, и было выполнено множество оптимизаций.
#### Обсуждение QQ group: 511046632 Приглашаем всех принять участие в тестировании и обсуждении!
#### Мой номер QQ: 280604597 Чи Юн Сюань Синь Син Дао
#### Мой блог: http://www.cnblogs.com/gaoyaguo
#### Исходный код версии для Windows: https://github.com/cyz7758520/Windows_audio_talkback_demo_program
#### Исходный код версии Android: https://github.com/cyz7758520/Android_audio_talkback_demo_program

# Спасибо
#### Спасибо WELEN, Shanshu, Chen Guofu за советы по Speex и WebRTC!